{"ast":null,"code":"// src/App.js\nimport React,{useState,useEffect}from'react';import{BrowserRouter as Router,Routes,Route,Navigate}from'react-router-dom';import JobList from'./components/JobList';import Filters from'./components/Filters';import LocationSelector from'./components/LocationSelector';import Header from'./components/Header';import JobModal from'./components/JobModal';import PostJobForm from'./components/PostJobForm';import PostJobLanding from'./components/PostJobLanding';import PostJobSuccess from'./components/PostJobSuccess';import'./app.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const HomePage=_ref=>{let{jobs,filteredJobs,handleFilterChange,handleLocationChange,handleJobClick,error,isLoading}=_ref;return/*#__PURE__*/_jsxs(\"main\",{className:\"main-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"search-section\",children:[/*#__PURE__*/_jsx(LocationSelector,{onLocationChange:handleLocationChange}),/*#__PURE__*/_jsx(Filters,{onFilterChange:handleFilterChange})]}),/*#__PURE__*/_jsx(\"div\",{className:\"jobs-container\",children:error?/*#__PURE__*/_jsxs(\"div\",{className:\"error-message\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Unable to connect to job server\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Please try again later. The server might be temporarily down.\"})]}):isLoading?/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:/*#__PURE__*/_jsx(\"h3\",{children:\"Searching for jobs...\"})}):filteredJobs.length>0?/*#__PURE__*/_jsx(JobList,{jobs:filteredJobs,onJobClick:handleJobClick}):/*#__PURE__*/_jsxs(\"div\",{className:\"no-jobs\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"No jobs available at the moment\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Please check back later or try adjusting your search criteria.\"})]})})]});};const App=()=>{const[jobs,setJobs]=useState([]);const[filteredJobs,setFilteredJobs]=useState([]);const[selectedJob,setSelectedJob]=useState(null);const[error,setError]=useState(null);const[isLoading,setIsLoading]=useState(false);useEffect(()=>{const fetchJobs=async()=>{setIsLoading(true);try{console.log(\"Fetching jobs from API...\");const response=await fetch('http://localhost:8000/api/v1/jobs');console.log(\"Response status:\",response.status);if(!response.ok){throw new Error(\"HTTP error! status: \".concat(response.status));}const data=await response.json();console.log(\"Fetched jobs:\",data);setJobs(data);setFilteredJobs(data);setError(null);}catch(error){console.error('Error fetching jobs:',error);setError(error.message);setJobs([]);setFilteredJobs([]);}finally{setIsLoading(false);}};fetchJobs();},[]);const handleFilterChange=jobFunction=>{if(!jobFunction){setFilteredJobs(jobs);}else{const newFilteredJobs=jobs.filter(job=>job.job_function===jobFunction);setFilteredJobs(newFilteredJobs);}};const handleLocationChange=async locationFilter=>{setIsLoading(true);try{if(!locationFilter){setFilteredJobs(jobs);setError(null);}else{const{zipCode,radius}=locationFilter;const response=await fetch(\"http://localhost:8000/api/v1/jobs/search/location?zip_code=\".concat(zipCode,\"&radius=\").concat(radius));if(!response.ok){throw new Error(\"HTTP error! status: \".concat(response.status));}const data=await response.json();setFilteredJobs(data);setError(null);}}catch(error){console.error('Error searching jobs:',error);setError(error.message);setFilteredJobs([]);}finally{setIsLoading(false);}};const handleJobClick=job=>{setSelectedJob(job);};const handleCloseModal=()=>{setSelectedJob(null);};return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"app-container\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(HomePage,{jobs:jobs,filteredJobs:filteredJobs,handleFilterChange:handleFilterChange,handleLocationChange:handleLocationChange,handleJobClick:handleJobClick,error:error,isLoading:isLoading})}),/*#__PURE__*/_jsx(Route,{path:\"/post-job\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/post-job/landing\",replace:true})}),/*#__PURE__*/_jsx(Route,{path:\"/post-job/landing\",element:/*#__PURE__*/_jsx(PostJobLanding,{})}),/*#__PURE__*/_jsx(Route,{path:\"/post-job/form\",element:/*#__PURE__*/_jsx(PostJobForm,{})}),/*#__PURE__*/_jsx(Route,{path:\"/post-job/success\",element:/*#__PURE__*/_jsx(PostJobSuccess,{})})]}),selectedJob&&/*#__PURE__*/_jsx(JobModal,{job:selectedJob,onClose:handleCloseModal})]})});};export default App;","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Router","Routes","Route","Navigate","JobList","Filters","LocationSelector","Header","JobModal","PostJobForm","PostJobLanding","PostJobSuccess","jsx","_jsx","jsxs","_jsxs","HomePage","_ref","jobs","filteredJobs","handleFilterChange","handleLocationChange","handleJobClick","error","isLoading","className","children","onLocationChange","onFilterChange","length","onJobClick","App","setJobs","setFilteredJobs","selectedJob","setSelectedJob","setError","setIsLoading","fetchJobs","console","log","response","fetch","status","ok","Error","concat","data","json","message","jobFunction","newFilteredJobs","filter","job","job_function","locationFilter","zipCode","radius","handleCloseModal","path","element","to","replace","onClose"],"sources":["C:/Users/Windows/.cursor-tutor/roofing-job-board/frontend/src/app.js"],"sourcesContent":["// src/App.js\r\nimport React, { useState, useEffect } from 'react';\r\nimport { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\r\nimport JobList from './components/JobList';\r\nimport Filters from './components/Filters';\r\nimport LocationSelector from './components/LocationSelector';\r\nimport Header from './components/Header';\r\nimport JobModal from './components/JobModal';\r\nimport PostJobForm from './components/PostJobForm';\r\nimport PostJobLanding from './components/PostJobLanding';\r\nimport PostJobSuccess from './components/PostJobSuccess';\r\nimport './app.css';\r\n\r\nconst HomePage = ({ jobs, filteredJobs, handleFilterChange, handleLocationChange, handleJobClick, error, isLoading }) => (\r\n    <main className=\"main-content\">\r\n        <div className=\"search-section\">\r\n            <LocationSelector onLocationChange={handleLocationChange} />\r\n            <Filters onFilterChange={handleFilterChange} />\r\n        </div>\r\n        <div className=\"jobs-container\">\r\n            {error ? (\r\n                <div className=\"error-message\">\r\n                    <h3>Unable to connect to job server</h3>\r\n                    <p>Please try again later. The server might be temporarily down.</p>\r\n                </div>\r\n            ) : isLoading ? (\r\n                <div className=\"loading\">\r\n                    <h3>Searching for jobs...</h3>\r\n                </div>\r\n            ) : filteredJobs.length > 0 ? (\r\n                <JobList jobs={filteredJobs} onJobClick={handleJobClick} />\r\n            ) : (\r\n                <div className=\"no-jobs\">\r\n                    <h3>No jobs available at the moment</h3>\r\n                    <p>Please check back later or try adjusting your search criteria.</p>\r\n                </div>\r\n            )}\r\n        </div>\r\n    </main>\r\n);\r\n\r\nconst App = () => {\r\n    const [jobs, setJobs] = useState([]);\r\n    const [filteredJobs, setFilteredJobs] = useState([]);\r\n    const [selectedJob, setSelectedJob] = useState(null);\r\n    const [error, setError] = useState(null);\r\n    const [isLoading, setIsLoading] = useState(false);\r\n\r\n    useEffect(() => {\r\n        const fetchJobs = async () => {\r\n            setIsLoading(true);\r\n            try {\r\n                console.log(\"Fetching jobs from API...\");\r\n                const response = await fetch('http://localhost:8000/api/v1/jobs');\r\n                console.log(\"Response status:\", response.status);\r\n                \r\n                if (!response.ok) {\r\n                    throw new Error(`HTTP error! status: ${response.status}`);\r\n                }\r\n                \r\n                const data = await response.json();\r\n                console.log(\"Fetched jobs:\", data);\r\n                \r\n                setJobs(data);\r\n                setFilteredJobs(data);\r\n                setError(null);\r\n            } catch (error) {\r\n                console.error('Error fetching jobs:', error);\r\n                setError(error.message);\r\n                setJobs([]);\r\n                setFilteredJobs([]);\r\n            } finally {\r\n                setIsLoading(false);\r\n            }\r\n        };\r\n\r\n        fetchJobs();\r\n    }, []);\r\n\r\n    const handleFilterChange = (jobFunction) => {\r\n        if (!jobFunction) {\r\n            setFilteredJobs(jobs);\r\n        } else {\r\n            const newFilteredJobs = jobs.filter(job => job.job_function === jobFunction);\r\n            setFilteredJobs(newFilteredJobs);\r\n        }\r\n    };\r\n\r\n    const handleLocationChange = async (locationFilter) => {\r\n        setIsLoading(true);\r\n        try {\r\n            if (!locationFilter) {\r\n                setFilteredJobs(jobs);\r\n                setError(null);\r\n            } else {\r\n                const { zipCode, radius } = locationFilter;\r\n                const response = await fetch(\r\n                    `http://localhost:8000/api/v1/jobs/search/location?zip_code=${zipCode}&radius=${radius}`\r\n                );\r\n                if (!response.ok) {\r\n                    throw new Error(`HTTP error! status: ${response.status}`);\r\n                }\r\n                const data = await response.json();\r\n                setFilteredJobs(data);\r\n                setError(null);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error searching jobs:', error);\r\n            setError(error.message);\r\n            setFilteredJobs([]);\r\n        } finally {\r\n            setIsLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleJobClick = (job) => {\r\n        setSelectedJob(job);\r\n    };\r\n\r\n    const handleCloseModal = () => {\r\n        setSelectedJob(null);\r\n    };\r\n\r\n    return (\r\n        <Router>\r\n            <div className=\"app-container\">\r\n                <Header />\r\n                <Routes>\r\n                    <Route path=\"/\" element={\r\n                        <HomePage \r\n                            jobs={jobs}\r\n                            filteredJobs={filteredJobs}\r\n                            handleFilterChange={handleFilterChange}\r\n                            handleLocationChange={handleLocationChange}\r\n                            handleJobClick={handleJobClick}\r\n                            error={error}\r\n                            isLoading={isLoading}\r\n                        />\r\n                    } />\r\n                    {/* Redirect /post-job to the landing page */}\r\n                    <Route path=\"/post-job\" element={<Navigate to=\"/post-job/landing\" replace />} />\r\n                    <Route path=\"/post-job/landing\" element={<PostJobLanding />} />\r\n                    <Route path=\"/post-job/form\" element={<PostJobForm />} />\r\n                    <Route path=\"/post-job/success\" element={<PostJobSuccess />} />\r\n                </Routes>\r\n                {selectedJob && <JobModal job={selectedJob} onClose={handleCloseModal} />}\r\n            </div>\r\n        </Router>\r\n    );\r\n};\r\n\r\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}